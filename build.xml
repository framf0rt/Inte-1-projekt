<project>
	 

	 <property name="main.build.dir" value="build/classes" />
	  <property name="lib.dir" location="lib" />
   <path id="build.classpath">
	   <pathelement location="${main.build.dir}"/>
                <fileset dir="${lib.dir}">
                        <include name="**/*.jar" />
                </fileset>
        </path>
	 
<!-- Tar bort mappen som innehåller gamla jar och klasser från föregående build -->
    <target name="clean">
        <delete dir="build"/>
    </target>
	
<!-- Skapar mappen build/classes och kompilerar koden i src och lägger klasserna i build/classes -->
    <target name="compile">
        <mkdir dir="build/classes"/>
        <javac srcdir="src" destdir="${main.build.dir}" classpathref="build.classpath"/>
    </target>

<!--  Skapar mappen build/jar och bygger ihop en jar fil av alla klasser -->
    <target name="jar">
        <mkdir dir="build/jar"/>
        <jar destfile="build/jar/HelloWorld.jar" basedir="build/classes">
<!--  Skapar en manifest filen som pekar ut Main klassen-->
            <manifest>
                <attribute name="Main-Class" value="inte.HelloWorld"/>
            </manifest>
        </jar>
    </target>
	 	 
	 
<!--  Kör jar filen-->
    <target name="run">
        <java jar="build/jar/HelloWorld.jar" fork="true"/>
    </target>

	
	 
  <target name="test">
        <junit printsummary="withOutAndErr"  haltonfailure="yes">  
		<classpath>
		<path refid="build.classpath" />
		<pathelement location="${main.build.dir}"/>
		</classpath>

		
            <batchtest>
                <fileset dir="build/classes" includes="HelloWorld_Test.java"/>
            </batchtest>
		<formatter type="plain" usefile="false" />
        </junit>
    </target>

</project>
